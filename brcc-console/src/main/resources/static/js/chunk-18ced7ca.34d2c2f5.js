(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18ced7ca"],{"1f45":function(e,t,a){},"97a1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"list-project",attrs:{bordered:!1}},[a("div",{staticClass:"add-btn"},[e.canManage?a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("\n            "+e._s(e.$t("env.btn.add"))+"\n        ")]):e._e()],1),a("section",{staticClass:"content"},[a("a-table",{attrs:{columns:e.columns,"data-source":e.environmentdata,loading:e.loading,pagination:e.pagination,"row-key":function(e){return e.id}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"name",fn:function(t,n){return a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.routerVersion(n)}}},[e._v(e._s(t))])}},{key:"operation",fn:function(t,n){return a("span",{},[e.canManage?a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(e.$t("env.table.operation.edit")))]):e._e(),e.canManage?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.canManage?a("a-popconfirm",{attrs:{title:e.$t("env.table.operation.delete.tips")},on:{confirm:function(t){return e.handleDelete(n)}}},[a("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e.$t("env.table.operation.delete")))])]):e._e(),e.canManage?a("a-divider",{attrs:{type:"vertical"}}):e._e(),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.routerVersion(n)}}},[e._v(e._s(e.$t("env.table.operation.version")))])],1)}}])},[e._l(e.columns,(function(t,n){return a("template",{slot:t.scopedSlots.title},[a("span",{key:n},[e._v(e._s(e.$t(t.scopedSlots.title)))])])}))],2),a("envdialog",{attrs:{dialog:e.dialog,formdata:e.formdata},on:{update:e.getEnvInfo}})],1)])},o=[],r=(a("1c01"),a("58b2"),a("8e6e"),a("f3e2"),a("d25f"),a("ac6a"),a("456d"),a("7f7f"),a("bd86")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"envdialog"},[a("a-modal",{attrs:{title:e.dialog.title,visible:e.dialog.show,"mask-closable":!1,"confirm-loading":e.dialog.loading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-form",{attrs:{form:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"id"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{initialValue:e.formdata.id}],expression:"['id',{initialValue:formdata.id}]"}]})],1),a("a-form-item",{attrs:{label:e.$t("env.table.columns.name")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("env.modal.modify.form.name.message")}],initialValue:e.formdata.name}],expression:"['name', {rules: [{ required: true, message: $t('env.modal.modify.form.name.message')}],initialValue: formdata.name}]"}]})],1),a("a-form-item",{attrs:{label:e.$t("env.table.columns.memo")}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["memo",{initialValue:e.formdata.memo}],expression:"['memo', {initialValue: formdata.memo}]"}]})],1)],1)],1)],1)},s=[],c=(a("96cf"),a("3b8d"));function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={data:function(){return{form:this.$form.createForm(this),labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}}}},props:{dialog:Object,formdata:Object},methods:{handleOk:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.preventDefault(),this.form.validateFields((function(e){if(!e){a.dialog.loading=!0;var t="add"===a.dialog.option?"addEnv":"updateEnv";a.$api.env[t](d({projectId:a.dialog.projectId},a.form.getFieldsValue())).then((function(e){0===e.status&&(a.$emit("update"),a.dialog.show=!1,a.$message.success("success！"),a.form.resetFields())})).finally((function(){a.dialog.loading=!1}))}}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCancel:function(e){this.dialog.show=!1,this.form.resetFields()}}},p=u,m=a("2877"),f=Object(m["a"])(p,i,s,!1,null,null,null),v=f.exports;function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b=[{dataIndex:"id",width:"8%",scopedSlots:{title:"env.table.columns.id"}},{dataIndex:"name",width:"20%",scopedSlots:{customRender:"name",title:"env.table.columns.name"}},{dataIndex:"memo",ellipsis:!0,scopedSlots:{title:"env.table.columns.memo"}},{dataIndex:"operation",width:200,scopedSlots:{customRender:"operation",title:"env.table.columns.operation"}}],O={name:"listEnv",created:function(){this.getEnvInfo()},components:{envdialog:v},data:function(){return{environmentdata:[],columns:b,value:"",pagination:{total:0,current:1,pageSize:10,sortBy:"id desc",hideOnSinglePage:!0,showTotal:function(e,t){return"显示 ".concat(t[0]," ~ ").concat(t[1]," 条记录，共 ").concat(e," 条记录")}},formdata:{name:"",memo:""},dialog:{show:!1,title:"",label:"",option:""},productId:"",productName:"",projectId:"",projectName:"",loading:!1,canManage:!1}},methods:{getEnvInfo:function(){var e=this;this.loading=!0,this.$api.env.getEnvList({projectId:this.$route.query.projectId,pageNo:this.pagination.current,pageSize:this.pagination.pageSize}).then((function(t){e.loading=!1,e.environmentdata=t.data.dataList,e.pagination.total=t.data.total,e.canManage=t.ext.canManage}))},handleTableChange:function(e){this.pagination.pageSize=e.pageSize,this.pagination.current=e.current,this.getEnvInfo()},routerVersion:function(e){this.$store.dispatch("setRccInfo",h(h({},this.$store.getters.rccInfo),{},{environmentId:e.id,environmentName:e.name})),this.$router.push({path:"/version",query:{environmentId:e.id}})},handleAdd:function(){this.dialog={show:!0,title:this.$t("env.btn.add"),option:"add",loading:!1,projectId:this.$route.query.projectId},this.formdata={}},handleEdit:function(e){this.dialog={show:!0,title:this.$t("env.btn.edit"),option:"edit",loading:!1,projectId:e.projectId},this.formdata=h({},e)},handleDelete:function(e){var t=this;this.$api.env.deleteEnv(e.id).then((function(e){0===e.status&&(t.$message.success("success"),t.getEnvInfo())}))}}},j=O,w=(a("9b4d"),Object(m["a"])(j,n,o,!1,null,"593f7171",null));t["default"]=w.exports},"9b4d":function(e,t,a){"use strict";a("1f45")}}]);